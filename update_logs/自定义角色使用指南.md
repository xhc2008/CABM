# 自定义角色使用指南

## 快速开始

### 1. 启动应用
```bash
python app.py
```

### 2. 访问功能
- 打开浏览器访问 `http://localhost:5000`
- 在主页点击"自定义角色"按钮

### 3. 或者直接测试
- 访问 `http://localhost:5000/test_custom_character.html` 直接进入自定义角色页面

## 功能演示

### 页面布局
- 顶部标题栏：包含返回按钮和页面标题
- 主体表单：包含所有角色配置字段
- 底部按钮：完成、取消、存草稿

### 表单字段说明
1. **角色ID**: 必填，只能包含字母、数字、下划线
2. **角色名**: 必填，角色的显示名称
3. **角色英文名**: 可选
4. **主题颜色**: 必填，可以手动输入或使用颜色选择器
5. **角色立绘校准**: 必填，-100到100的整数
6. **角色简介**: 必填，不会发送给AI
7. **角色描述**: 必填，包含基本设定和说话风格
8. **角色心情设置**: 必填，至少一个心情
9. **角色详细信息**: 必填，上传.txt文件

### 特殊功能
- **实时验证**: 角色ID会实时检查格式
- **颜色同步**: 颜色选择器和文本输入会自动同步
- **动态表格**: 可以添加/删除心情行
- **文件预览**: 显示已选择的文件名
- **草稿功能**: 自动保存和恢复表单数据

## 创建角色示例

### 示例数据
- 角色ID: `test_character`
- 角色名: `测试角色`
- 主题颜色: `#FF6B6B`
- 立绘校准: `0`
- 角色简介: `这是一个用于测试的角色`
- 角色描述: `活泼开朗，喜欢帮助他人`

### 心情设置示例
1. 开心 + 开心表情图片
2. 生气 + 生气表情图片
3. 悲伤 + 悲伤表情图片
4. 惊讶 + 惊讶表情图片

## 文件要求

### 图片文件
- 支持格式: jpg, png, gif, webp等
- 建议尺寸: 适合角色立绘显示
- 文件大小: 建议不超过10MB

### 音频文件
- 支持格式: mp3, wav, ogg等
- 用途: 作为TTS的参考音频
- 文件大小: 建议不超过50MB

### 文本文件
- 格式: .txt文件
- 编码: UTF-8
- 内容: 角色的详细背景故事和设定

## 故障排除

### 常见问题
1. **角色ID验证失败**: 确保只包含字母、数字、下划线
2. **颜色格式错误**: 使用#开头的6位十六进制颜色码
3. **文件上传失败**: 检查文件格式和大小
4. **表单提交失败**: 确保所有必填字段都已填写

### 调试方法
1. 打开浏览器开发者工具查看控制台错误
2. 检查网络请求是否成功
3. 确认服务器正常运行

## 后续开发

当前实现的是基础版本，后续可以扩展：
1. 角色编辑功能
2. 角色预览功能
3. 批量导入功能
4. 角色分享功能